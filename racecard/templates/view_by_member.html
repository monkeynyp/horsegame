{% extends "master.html" %} {% block title %} Horse Racing Prediction By Machine Learning  and Users {% endblock %} 

{% load i18n %}
{% load static %}

{% block content %}
<br><br><br><br>
<div class="w3-margin">
    <a href="/racecard/" class="w3-button w3-black">{% trans 'View By Race' %}</a>
  </div>
  
  <div class="w3-row-padding w3-margin">
    <div class="w3-third">
      <div class="w3-bar w3-black">
        {% for user_data in complete_tips_by_user %}
          <button class="w3-bar-item w3-button" onclick="openUser(event, '{{ user_data.user }}')">{{ user_data.user }}</button>
        {% endfor %}
      </div>
    </div>
  
    <div id="userTabs" class="w3-twothird">
      {% for user_data in complete_tips_by_user %}
        <div id="{{ user_data.user }}" class="user-content w3-container w3-border w3-white w3-padding-16" style="display:none">
          {% cycle 'w3-blue' 'w3-green' 'w3-yellow' 'w3-brown' 'w3-indigo' 'w3-lime' 'w3-amber' as color silent %}
          <div class="w3-padding-32 w3-left-align">
            <header class="w3-container {{color}}">
              <h6>{{ user_data.user }}
                {% if forloop.counter == 1 %}
                  <span class="w3-right"><i class="fa-solid fa-crown fa-rotate-by" style="color: #FFD43B; --fa-rotate-angle: 15deg;"></i></span>
                {% elif forloop.counter == 2 %}
                  <span class="w3-right"><i class="fa-solid fa-crown fa-rotate-by" style="color: #f6f5f1e9; --fa-rotate-angle: 15deg;"></i></span>
                {% endif %}
              </h6>
            </header>
            {% for race_no, records in user_data.records_by_race_no.items %}
              <div>
                <h5>{% trans 'Race' %} {{ race_no }}</h5>
                <div class="w3-row-padding">
                  {% for record in records %}
                    <div class="w3-col s4">
                      <span class="w3-badge">{{ record.horse_no }}</span>&nbsp {% trans record.horse_name %}
                      {% if record.hit == 1 %}
                        <span class="w3-badge w3-red w3-small">${{record.dividend}}</span>
                      {% endif %}
                    </div>
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
            <footer class="w3-container {{color}} w3-left-align">
              <span class="w3-small">
                <p class="w3-left-align">
                  {% trans 'Current' %}:
                  {% for last_perf in last_perf_by_user %}
                    {% if last_perf.user__username  == user_data.user.username %}
                      <span class ="w3-tooltip w3-red">{{ last_perf.hit_pst | floatformat:0 }}% 
                      <span class="w3-text">(<em>ðŸ’°${{ last_perf.total_dividend | floatformat:0 }}</em>)</span></span>
                    {% endif %}
                  {% endfor %}
                  <br>
                  {% trans 'Total' %}:
                  {% for score in user_scores %}
                    {% if score.user == user_data.user %}
                      {{ score.percentage | floatformat:0 }}%
                    {% endif %}
                  {% endfor %}
                  <span class = "w3-right">
                    {% if user_data.groups_name == "MailList" %}
                      <i class="fa-solid fa-person fa-xl "></i>
                    {% else %}
                      <i class="fa-solid fa-robot"></i>
                    {% endif %}
                  </span>
                </p> 
              </span>
            </footer>
            <div class="w3-center">
              <button class="w3-button w3-sand w3-round w3-ripple w3-large" ><a href="https://feetheho.com/4/7158523"><i class="fa-solid fa-heart" style="color: #f01000;"></i>{% trans "Support Monkey" %}</h5></a>
              </button>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  
  <script>
  function openUser(evt, userName) {
    var i, x, tablinks;
    x = document.getElementsByClassName("user-content");
    for (i = 0; i < x.length; i++) {
      x[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("w3-bar-item");
    for (i = 0; i < x.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" w3-dark-grey", "");
    }
    document.getElementById(userName).style.display = "block";
    evt.currentTarget.className += " w3-dark-grey";
  }
  </script>
  
  




{% endblock %}